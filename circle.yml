machine:
  java:
    version: oraclejdk8
  timezone: Asia/Tokyo
dependencies:
  override:
    - echo y | android update sdk --no-ui --filter "android-22,build-tools-22.0.1,extra-android-support,extra-android-m2repository"
test:
  override:
    - ./gradlew check
    - gem install checkstyle_filter-git saddler saddler-reporter-github github_status_notifier
    - cat app/build/reports/checkstyle/checkstyle.xml | checkstyle_filter-git diff origin/master | saddler report --require saddler/reporter/github --reporter Saddler::Reporter::Github::PullRequestReviewComment
    - github-status-notifier notify --exit-status $? --context "noboru-i/car-navi-modoki"
deployment:
  master:
    branch: master
    commands:
      - ./gradlew assemble uploadDeployGate
